<section class="wizard">
  <header class="wizard-header" ng-class="{'open': wizard.dropdown.isOpen}">
    <h1 class="wizard-name" ng-bind="wizard.name"></h1>
    <h2 class="wizard-current-step wizard-desktop-hide">
      {{wizard.settings.text.step}} {{wizard.wizardState.currentMajorStep.stepNumber }}: {{wizard.wizardState.currentMajorStep.name}}
    </h2>
    <div
      class="btn-group btn-group-wizard-steps wizard-mobile-hide"
      dropdown>
      <button
        dropdown-toggle
        type="button" 
        class="btn btn-simple btn-wizard-current-step dropdown-toggle">
        {{wizard.settings.text.step}} {{wizard.wizardState.currentMajorStep.stepNumber }}<span class="wizard-mobile-hide"> {{wizard.settings.text.of}} {{wizard.steps.length}}</span>: {{wizard.wizardState.currentMajorStep.name}}
        <span class="caret"></span>
      </button>
      <ol 
        class="dropdown-menu wizard-steps-dropdown-menu wizard-steps wizard-major-steps">
        <li
          ng-repeat="step in wizard.steps track by step.id"
          ng-class="{'wizard-item-active': wizard.wizardState.currentMajorStep === step,  'wizard-item-completed': step.completed, 'wizard-item-disabled': step.disabled, 'has-substeps': step.steps.length && !step.disabled, 'substeps-open': step.isOpen}">
          <button
            role="button"
            type="button"
            class="btn-menu-item wizard-step"
            ng-disabled="step.disabled"
            ng-click="wizard.stepClick($event, step)">
            {{step.name}}
            <svg ng-if="step.complete" class="icon icon-checkmark">
              <use xlink:href="#icon-checkmark" />
            </svg>
          </button>
          <div ng-if="step.steps.length && !!step.isOpen">
            <ol class="wizard-steps wizard-minor-steps wizard-sub-steps">
              <li
                ng-repeat="subStep in step.steps track by subStep.id"
                ng-class="{'wizard-item-active': wizard.wizardState.currentStep === subStep, 'wizard-item-completed': subStep.completed, 'wizard-item-disabled': subStep.disabled }">
                <button
                  role="button"
                  type="button"
                  class="btn-menu-item wizard-step wizard-sub-step"
                  ng-disabled="subStep.disabled"
                  ng-click="wizard.stepClick($event, subStep)"
                  ng-bind="subStep.name"></button>
              </li>
            </ol>
          </div>
        </li>
      </ol>
    </div>
    <ul class="wizard-buttons wizard-mobile-hide">
      <li ng-if="wizard.settings.buttons.next.visible">
        <wizard-button
          class="btn btn-primary"
          button="wizard.settings.buttons.next"
          callback="wizard.nextClick">
          {{wizard.settings.buttons.next.name}}
        </wizard-button>
      </li>
      <li ng-if="wizard.settings.buttons.previous.visible">
        <wizard-button
          class="btn btn-default"
          button="wizard.settings.buttons.previous"
          callback="wizard.previousClick">
          {{wizard.settings.buttons.previous.name}}
        </wizard-button>
      </li>
      <li ng-if="wizard.settings.buttons.save.visible">
        <wizard-button
          class="btn btn-default"
          button="wizard.settings.buttons.save"
          callback="wizard.saveClick">
          {{wizard.settings.buttons.save.name}}
        </wizard-button>
      </li>
      <li ng-if="wizard.settings.buttons.cancel.visible">
        <wizard-button
          class="btn btn-default"
          button="wizard.settings.buttons.cancel"
          callback="wizard.cancelClick">
          {{wizard.settings.buttons.cancel.name}}
        </wizard-button>
      </li>
    </ul>
    <div
      class="btn-group btn-group-wizard-options-menu wizard-desktop-hide" 
      is-open="wizard.dropdown.isOpen">
      <button
        type="button" 
        dropdown-toggle
        ng-click="wizard.dropdown.isOpen = !wizard.dropdown.isOpen"
        class="btn btn-simple btn-wizard-options-menu">
        <svg class="icon">
          <use
            xlink:href="#icon-arrow-top"
            ng-if="wizard.dropdown.isOpen" />
          <use
            xlink:href="#icon-arrow-bottom"
            ng-if="!wizard.dropdown.isOpen" />
        </svg>
      </button>
    </div>
    <ul class="dropdown-menu wizard-options-menu-dropdown">
      <li ng-if="wizard.settings.buttons.save.visible">
        <wizard-button
          class="btn-menu-item"
          button="wizard.settings.buttons.save"
          callback="wizard.saveClick">
          {{wizard.settings.buttons.save.name}}
        </wizard-button>
      </li>
      <li ng-if="wizard.settings.buttons.cancel.visible">
        <wizard-button
          class="btn-menu-item"
          button="wizard.settings.buttons.cancel"
          callback="wizard.cancelClick">
          {{wizard.settings.buttons.cancel.name}}
        </wizard-button>
      </li>
    </ul>
  </header>
  <div
    class="wizard-body"
    ng-transclude>

  </div>
  <footer class="wizard-mobile-footer wizard-desktop-hide">
    <wizard-button
      class="btn btn-default"
      button="wizard.settings.buttons.previous"
      callback="wizard.previousClick">
      {{wizard.settings.buttons.previous.name}}
    </wizard-button>
    <wizard-button
      class="btn btn-primary"
      button="wizard.settings.buttons.next"
      callback="wizard.nextClick">
      {{wizard.settings.buttons.next.name}}
    </wizard-button>
  </footer>
  <div ng-include="'/$iui-wizard/icons/symbol-defs.html'"></div>
</section>